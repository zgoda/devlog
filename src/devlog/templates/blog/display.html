{% extends "blog/base.html" %}

{% from "macros/blog.html" import render_post_headline %}
{% from "macros/menus.html" import tool_dropdown %}

{% block pagetitle %}{{ blog.name }}{% endblock %}

{% block widecontent %}
<div class="content">
  <h1>{{ blog.name }}</h1>
  {% if blog.blurb_html %}
  {{ blog.blurb_html|safe }}
  {% endif %}
  {% if current_user == blog.user %}
  {% set menu_items = [
    (url_for('blog.details', blog_id=blog.id), gettext('edit blog')),
    (url_for('post.create', blog_id=blog.id), gettext('add post')),
    (url_for('blog.import_posts', blog_id=blog.id), gettext('import posts')),
  ] %}
  {{ tool_dropdown(gettext('tools'), menu_items, 'owner-tools-menu') }}
  {% endif %}
  <hr class="is-large">
  <div class="box">
    <h2>{{ gettext('recent posts').capitalize() }}</h2>
    {% for post in posts.items %}
    {{ render_post_headline(post) }}
    {% else %}
    <p>{{ gettext('no posts yet').capitalize() }}.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
