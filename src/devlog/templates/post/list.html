{% extends "post/base.html" %}

{% from "macros/pagination.html" import render_pagination %}
{% from "macros/blog.html" import post_url %}

{% block pagetitle %}{{ gettext('recent posts').capitalize() }}{% endblock %}

{% block widecontent %}
<div class="content">
  <h1>{{ gettext('recent posts').capitalize() }}</h1>
  {% if pagination.pages %}
  <table class="table">
    <thead>
      <tr>
        <th>{{ gettext('title') }}</th>
        <th>{{ gettext('date') }}</th>
        <th>{{ gettext('blog') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for post in pagination.items %}
      <tr>
        <td><a href="{{ post_url(post) }}">{{ post.title }}</a></td>
        <td>{{ post.created|datetimeformat('long') }}</td>
        <td><a href="{{ url_for('blog.display', blog_id=post.blog_id) }}">{{ post.blog.name }}</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {{ render_pagination(pagination) }}
  {% else %}
  <p>{{ gettext('no posts found').capitalize() }}.</p>
  {% endif %}
</div>
{% endblock %}
